<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jet Vanguard Ultra | BZ247</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@900&display=swap');
        :root { --neon: #00ff88; --pink: #ff0055; --cyan: #00d4ff; --gold: #ffd700; }
        
        * { user-select: none; -webkit-user-select: none; touch-action: none; -webkit-tap-highlight-color: transparent; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; font-family: 'Orbitron', sans-serif; color: white; }
        
        #gameCanvas { display: block; background: #000; }
        
        /* ELITE HUD */
        .hud { position: absolute; top: 15px; width: 100%; display: flex; justify-content: space-around; pointer-events: none; z-index: 10; }
        .stat { background: rgba(0,0,0,0.85); border: 2px solid var(--cyan); padding: 8px 15px; border-radius: 12px; text-align: center; box-shadow: 0 0 20px var(--cyan); }
        .stat b { font-size: 18px; text-shadow: 0 0 10px var(--cyan); }

        /* SUPER METER */
        #superWrap { position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); width: 75%; text-align: center; z-index: 100; }
        #superBar { width: 100%; height: 14px; background: #111; border: 2px solid #fff; border-radius: 7px; overflow: hidden; }
        #superFill { height: 100%; background: var(--gold); width: 0%; transition: 0.3s; box-shadow: 0 0 20px var(--gold); }
        #superBtn { margin-top: 12px; background: var(--gold); color: #000; border: none; padding: 12px 30px; border-radius: 25px; font-weight: 900; display: none; box-shadow: 0 0 25px var(--gold); animation: pulse 1s infinite; }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

        #bossHealthWrap { position: absolute; top: 95px; width: 80%; left: 10%; display: none; z-index: 10; text-align: center; }
        #bossFill { height: 12px; background: var(--pink); width: 100%; transition: 0.2s; border-radius: 6px; box-shadow: 0 0 15px var(--pink); }

        #overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.98); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000; }
        .start-btn { background: var(--neon); color: #000; padding: 20px 60px; border-radius: 60px; font-weight: 900; font-size: 20px; border: none; cursor: pointer; box-shadow: 0 0 40px var(--neon); }
    </style>
</head>
<body onload="init()">

    <div id="overlay">
        <h1 style="color:var(--neon); margin:0; letter-spacing:5px;">VANGUARD ULTRA</h1>
        <p style="color:#555; font-size:10px; letter-spacing:3px;">BZ247 ELITE DEFENSE SYSTEM</p>
        <button class="start-btn" onclick="startMission()">DEPLOY SHIP â–¶</button>
    </div>

    <div class="hud">
        <div class="stat"><span>SCORE</span><br><b id="s">0</b></div>
        <div class="stat"><span>HP</span><br><b id="h">100</b></div>
    </div>

    <div id="bossHealthWrap">
        <div style="background:#111; border-radius:6px; padding:2px;"><div id="bossFill"></div></div>
        <small style="color:var(--pink); font-weight:bold; letter-spacing:2px;">DRAGON MOTHERSHIP</small>
    </div>

    <div id="superWrap">
        <div id="superBar"><div id="superFill"></div></div>
        <button id="superBtn" onclick="activateSuper()">ULTIMATE BLAST READY</button>
    </div>

    <canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas'), ctx = canvas.getContext('2d');
    
    // PROFESSIONAL ASSETS
    let shipImg = new Image(), enemyImg = new Image(), bossImg = new Image();
    shipImg.src = 'https://cdn-icons-png.flaticon.com/512/547/547434.png'; // Professional Fighter Jet
    enemyImg.src = 'https://cdn-icons-png.flaticon.com/512/3214/3214643.png'; 
    bossImg.src = 'https://cdn-icons-png.flaticon.com/512/3063/3063548.png';

    let score = 0, health = 100, superCharge = 0, gameActive = false, dragonActive = false;
    let shooting = false, screenShake = 0, bgY = 0;
    let player = { x: 0, y: 0, w: 75, h: 75, tx: 0, ty: 0, tilt: 0, alive: true };
    let bullets = [], enemyBullets = [], enemies = [], particles = [], stars = [];

    let audioCtx;
    function initAudio() { if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }
    function playSound(f, type, d, v=0.04) {
        if(!audioCtx) return;
        let o = audioCtx.createOscillator(), g = audioCtx.createGain();
        o.type = type; o.frequency.setValueAtTime(f, audioCtx.currentTime);
        g.gain.setValueAtTime(v, audioCtx.currentTime);
        o.connect(g); g.connect(audioCtx.destination);
        o.start(); o.stop(audioCtx.currentTime + d);
    }

    function init() {
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        for(let i=0; i<100; i++) stars.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, s: Math.random()*3+1 });
    }

    function startMission() {
        document.getElementById('overlay').style.display = 'none';
        initAudio(); gameActive = true;
        player.tx = player.x = canvas.width/2 - 37;
        player.ty = player.y = canvas.height - 200;
        loop();
    }

    // ULTIMATE BLAST
    function activateSuper() {
        if(superCharge < 100) return;
        superCharge = 0; document.getElementById('superFill').style.width = '0%';
        document.getElementById('superBtn').style.display = 'none';
        screenShake = 20;
        enemies.forEach(e => explode(e.x+30, e.y+30, "white"));
        enemies = []; enemyBullets = [];
        score += 1000; updateHUD();
        playSound(60, 'square', 0.6, 0.2);
        if(navigator.vibrate) navigator.vibrate([100, 50, 200]);
    }

    canvas.addEventListener('touchstart', (e) => { shooting = true; updateT(e); });
    canvas.addEventListener('touchmove', updateT);
    canvas.addEventListener('touchend', () => shooting = false);
    function updateT(e) { 
        if(!gameActive || !player.alive) return; 
        player.tx = e.touches[0].clientX - 37; 
        player.ty = e.touches[0].clientY - 100; 
    }

    setInterval(() => { if(shooting && gameActive && player.alive) fire(); }, 140);
    setInterval(() => { if(gameActive && !dragonActive && player.alive) spawn(); }, 1100);

    function fire() {
        bullets.push({ x: player.x + 15, y: player.y, w: 6, h: 22 });
        bullets.push({ x: player.x + 55, y: player.y, w: 6, h: 22 });
        playSound(800, 'sawtooth', 0.04, 0.02);
    }

    function spawn() {
        enemies.push({ x: Math.random()*(canvas.width-60), y: -70, w: 60, h: 60, s: 3 });
    }

    function explode(x, y, color) {
        for(let i=0; i<15; i++) particles.push({ x: x, y: y, vx: (Math.random()-0.5)*15, vy: (Math.random()-0.5)*15, l: 30, c: color });
    }

    function loop() {
        if(!gameActive) return;
        
        // Screenshake Logic
        let sx = (Math.random()-0.5)*screenShake;
        let sy = (Math.random()-0.5)*screenShake;
        if(screenShake > 0) screenShake *= 0.9;

        ctx.setTransform(1,0,0,1,sx,sy);
        ctx.fillStyle = "#000"; ctx.fillRect(-20, -20, canvas.width+40, canvas.height+40);

        stars.forEach(st => {
            st.y += st.s; if(st.y > canvas.height) st.y = -5;
            ctx.fillStyle = "rgba(255,255,255,0.4)"; ctx.fillRect(st.x, st.y, 1.5, 1.5);
        });

        // TILT EFFECT
        let dx = player.tx - player.x;
        player.tilt = dx * 0.05;
        player.x += dx * 0.15;
        player.y += (player.ty - player.y) * 0.15;

        particles.forEach((p, i) => {
            p.x += p.vx; p.y += p.vy; p.l--;
            ctx.fillStyle = p.c; ctx.fillRect(p.x, p.y, 3, 3);
            if(p.l <= 0) particles.splice(i, 1);
        });

        bullets.forEach((b, i) => {
            b.y -= 16;
            ctx.shadowBlur = 12; ctx.shadowColor = "var(--gold)";
            ctx.fillStyle = "var(--gold)"; ctx.fillRect(b.x, b.y, b.w, b.h);
            ctx.shadowBlur = 0;
            if(b.y < -30) bullets.splice(i, 1);
        });

        enemies.forEach((e, i) => {
            e.y += e.s; ctx.drawImage(enemyImg, e.x, e.y, e.w, e.h);
            bullets.forEach((b, bi) => {
                if(b.x < e.x+e.w && b.x+b.w > e.x && b.y < e.y+e.h && b.y+b.h > e.y) {
                    explode(e.x+30, e.y+30, "orange"); enemies.splice(i, 1); bullets.splice(bi, 1);
                    score += 50; superCharge = Math.min(100, superCharge + 5); updateHUD();
                    screenShake = 5; playSound(200, 'square', 0.1, 0.05);
                }
            });
            if(e.y > canvas.height) enemies.splice(i, 1);
        });

        if(player.alive) {
            // ANIMATED THRUSTER FIRE
            let flicker = Math.random() * 10;
            ctx.fillStyle = "rgba(0, 212, 255, 0.6)";
            ctx.beginPath();
            ctx.moveTo(player.x+25, player.y+70);
            ctx.lineTo(player.x+37, player.y+90+flicker);
            ctx.lineTo(player.x+50, player.y+70);
            ctx.fill();

            // RENDER SHIP WITH TILT
            ctx.save();
            ctx.translate(player.x+37, player.y+37);
            ctx.rotate(player.tilt * Math.PI/180);
            ctx.shadowBlur = 20; ctx.shadowColor = "var(--cyan)";
            ctx.drawImage(shipImg, -37, -37, player.w, player.h);
            ctx.restore();
        }

        if(health <= 0) location.reload();
        requestAnimationFrame(loop);
    }

    function updateHUD() {
        document.getElementById('s').innerText = score;
        document.getElementById('h').innerText = health;
        document.getElementById('superFill').style.width = superCharge + '%';
        if(superCharge >= 100) {
            document.getElementById('superBtn').style.display = 'block';
            playSound(1000, 'sine', 0.1, 0.02); // Warning Beep
        }
    }
</script>
</body>
</html>
